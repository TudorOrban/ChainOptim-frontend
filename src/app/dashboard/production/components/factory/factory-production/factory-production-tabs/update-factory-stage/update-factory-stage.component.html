<div class="std-form-container space-x-4">
    <form [formGroup]="factoryStageForm" (ngSubmit)="onSubmit()" class="w-2/3 space-y-6">
        <h2 class="text-2xl font-semibold mb-4 text-center">Update Factory Stage</h2>

        <div>
            <label for="capacity" class="form-label">Stage:</label>
            <app-select-stage [initialData]="{ stage: currentStage }" (stageSelected)="handleStageIdChange($event)"></app-select-stage>
        </div>

        <div>
            <label for="capacity" class="form-label">Capacity:</label>
            <input type="number" id="capacity" formControlName="capacity" class="form-input">
            <div *ngIf="factoryStageForm.get('capacity')?.touched && factoryStageForm.get('capacity')?.errors">
                <p *ngIf="factoryStageForm.get('capacity')?.errors?.['pattern']" class="form-error">
                    Invalid capacity format. Capacity must be a number bigger than 0.
                </p>
            </div>
        </div>
        
        <div>
            <label for="duration" class="form-label">Duration:</label>
            <div class="flex items-center">
                <div>
                    <input type="number" id="duration" formControlName="duration" class="form-input">
                    <div *ngIf="factoryStageForm.get('duration')?.touched && factoryStageForm.get('duration')?.errors">
                        <p *ngIf="factoryStageForm.get('duration')?.errors?.['pattern']" class="form-error">
                            Invalid duration format. Duration must be a number bigger than 0.
                        </p>
                    </div>
                </div>
                
                <app-select-duration (durationChange)="handleDurationChange($event)"></app-select-duration>
            </div>
        </div>
        
        <div>
            <label for="priority" class="form-label">Priority:</label>
            <input type="number" id="priority" formControlName="priority" class="form-input">
            <div *ngIf="factoryStageForm.get('priority')?.touched && factoryStageForm.get('priority')?.errors">
                <p *ngIf="factoryStageForm.get('priority')?.errors?.['pattern']" class="form-error">
                    Invalid priority format. Priority must be a number bigger than 0.
                </p>
            </div>
        </div>

        <div>
            <label for="minimumRequiredCapacity" class="form-label">Minimum required capacity:</label>
            <input type="number" id="minimumRequiredCapacity" formControlName="minimumRequiredCapacity" class="form-input">
            <div *ngIf="factoryStageForm.get('minimumRequiredCapacity')?.touched && factoryStageForm.get('minimumRequiredCapacity')?.errors">
                <p *ngIf="factoryStageForm.get('minimumRequiredCapacity')?.errors?.['pattern']" class="form-error">
                    Invalid minimum required capacity format. Minimum required capacity must be a number bigger than 0.
                </p>
            </div>
        </div>

        <div class="flex items-center w-full justify-end">
            <button type="submit" class="standard-write-button">
                Update Factory Stage
            </button>
        </div>
    </form>
</div>
